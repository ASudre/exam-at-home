type Questionnaire @model
@auth(rules: [
  { allow: groups, groupsField: "groupsCanAccess", operations: [read] },
  { allow: groups, groups: ["Admin"], operations: [read] }
]) {
  id: ID!
  questions: [Question] @connection(name: "ByQuestionnaire", fields: ["id"])
}

type Question @model
@auth(rules: [
  { allow: private, operations: [read] },
  { allow: private, provider: iam, operations: [create, update, delete] }
  { allow: groups, groups: ["Admin"] }
])
@key(name: "ByQuestionnaire", fields: ["questionnaireId", "imageKey"]) {
  id: ID!
  questionnaireId: ID!
  imageKey: String!
  answer: String!
  answers: [Answer] @connection(name: "ByQuestion", fields: ["id"])
}

type Answer @model
@auth(rules: [
  { allow: owner, operations: [create, read, update, delete] },
  { allow: groups, groups: ["Admin"], operations: [read] }
])
@key(name: "ByQuestion", fields: ["questionId", "answer"]) {
  id: ID!
  questionId: ID!
  answer: String!
}
